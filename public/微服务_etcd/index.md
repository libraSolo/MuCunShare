# 微服务_ETCD


# **ETCD 学习笔记**
## **ETCD 介绍**
ETCD 是一个 **分布式** 的、高可用的键值存储系统，它主要用于 **共享配置** 和 **服务发现**。ETCD 基于 Raft 一致性算法，保证了数据的强一致性。ETCD 的 API 是基于HTTP的。
### **ETCD 能力和作用**
1. ETCD 集群中，多节点数据的强一致性。
    * Raft 算法：基于 Raft 协议实现多节点数据一致性，确保读写操作的线性一致性。
    * Leader 选举：自动选举 Leader 节点处理写请求，Follower 节点同步数据，保证集群高可用。
2. 提供监听机制，用于监听和推送变更。
    * 客户端可监听键值的变化（如配置更新、服务上下线），实时推送变更事件。
3. 服务注册发现，提供 key 的过期和续约机制。
    * 为键值绑定租约，自动删除过期数据（如服务心跳检测）。
    * 客户端可续约（KeepAlive）维持键的生命周期。
4. ETCD 提供了数据的安全存储和加密传输，确保数据的安全性。
    * TLS 加密：支持客户端与集群间通信加密。
    * RBAC 权限：基于角色的访问控制，限制用户或应用的读写权限。
5. ETCD 支持数据的版本控制和历史记录，方便数据的回退和追溯。
6. ETCD 的数据模型是基于键值对的，支持范围查询和前缀查询，方便数据的检索和过滤。
7. ETCD 提供了多种编程语言的客户端库，方便开发者在不同的语言环境下使用 ETCD。

### **ETCD 与其他系统的对比**

| **特性**       | **ETCD**                | **ZooKeeper**         | **Consul**             |
|----------------|-------------------------|-----------------------|------------------------|
| **一致性协议** | Raft                   | ZAB                  | Raft                  |
| **数据模型**   | 层级键值               | 树形节点（ZNode）     | 键值、服务发现         |
| **Watch 机制** | 基于键范围的事件监听   | 单节点监听            | 支持服务健康检查       |
| **运维复杂度** | 较低（Go 编写）        | 较高（Java 依赖 JVM）| 中等                  |
| **云原生集成** | Kubernetes 默认        | 较少                 | 支持但非主流           |
| **性能**       | 高吞吐、低延迟         | 中等                 | 中等                  |
| **安全性**     | 支持 TLS、RBAC         | 支持 ACL              | 支持 ACL、TLS          |
| **适用场景**   | 服务发现、配置管理、分布式锁 | 分布式协调、配置管理 | 服务发现、健康检查     |

## **ETCD 常用命令**

